---
import ThemedPage from '../../layouts/themed-page.astro';
import { ResourcesContent } from '../../components/pages/ResourcesContent';
import { initCMS, getResources } from '../../lib/webflow-cms';

// Initialize CMS with Cloudflare runtime context
initCMS(Astro.locals);

// Fetch resources from CMS
let resources: any[] = [];
try {
  const result = await getResources();
  resources = result.items;
} catch (error) {
  console.error('Error fetching resources:', error);
}
---

<ThemedPage title="Resources | Jewett Junction" theme="dark" currentSection="resources">
  <ResourcesContent client:load theme="dark" resources={resources} />
</ThemedPage>

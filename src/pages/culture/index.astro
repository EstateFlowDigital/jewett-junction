---
import ThemedPage from '../../layouts/themed-page.astro';
import { CultureContent } from '../../components/pages/CultureContent';
import { initCMS, getCultureStories } from '../../lib/webflow-cms';

// Initialize CMS with Cloudflare runtime context
initCMS(Astro.locals);

// Fetch culture stories from CMS
let stories: any[] = [];
try {
  const result = await getCultureStories();
  stories = result.items;
} catch (error) {
  console.error('Error fetching culture stories:', error);
}
---

<ThemedPage title="Culture | Jewett Junction" theme="dark" currentSection="culture">
  <CultureContent client:load theme="dark" stories={stories} />
</ThemedPage>

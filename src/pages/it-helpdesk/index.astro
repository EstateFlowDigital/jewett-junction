---
import ThemedPage from '../../layouts/themed-page.astro';
import { ITHelpdeskContent } from '../../components/pages/ITHelpdeskContent';
import { initCMS, getITKnowledgeBase } from '../../lib/webflow-cms';

// Initialize CMS with runtime credentials
initCMS(Astro.locals);

// Fetch IT content server-side
const itResult = await getITKnowledgeBase({ limit: 50 });
const itArticles = itResult.items;
---

<ThemedPage title="IT Help Desk | Jewett Junction" theme="dark" currentSection="it-helpdesk">
  <ITHelpdeskContent client:load theme="dark" initialItems={itArticles} />
</ThemedPage>

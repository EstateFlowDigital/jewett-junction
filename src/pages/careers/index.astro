---
import ThemedPage from '../../layouts/themed-page.astro';
import { CareersContent } from '../../components/pages/CareersContent';
import { initCMS, getJobPostings } from '../../lib/webflow-cms';

// Initialize CMS with Cloudflare runtime context
initCMS(Astro.locals);

// Fetch job postings from CMS
let jobs: any[] = [];
try {
  const result = await getJobPostings();
  jobs = result.items;
} catch (error) {
  console.error('Error fetching job postings:', error);
}
---

<ThemedPage title="Careers | Jewett Junction" theme="dark" currentSection="careers">
  <CareersContent client:load theme="dark" jobs={jobs} />
</ThemedPage>
